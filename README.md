### **脚本名称**  
GitHub Release 同步工具（镜像工具）


### **核心功能**  
该脚本用于**自动同步源仓库的 Release 内容到目标仓库**，包括 Release 元数据（名称、描述、标签等）、附件文件（如安装包、压缩包）以及源代码压缩包，实现两个仓库 Release 内容的实时对齐。  

具体功能包括：  
1. **全量+增量同步**：  
   - 首次运行时同步源仓库所有历史 Release；后续运行仅同步新增或更新的内容，避免重复操作。  
2. **多类型内容同步**：  
   - 同步 Release 附件（如 `.exe`、`.zip`、`.img` 等安装包/资源文件）。  
   - 自动下载源仓库的源代码压缩包（`zip`/`tar.gz` 格式），并重命名后上传到目标仓库（命名格式：`SourceCode_<标签名>.zip`）。  
3. **智能更新检测**：  
   - 对 Release 附件：通过**文件大小+更新时间**双重判断，即使文件大小不变，若源文件更新时间更新，也会同步最新版本。  
   - 对源代码：简化判断逻辑，仅检查目标仓库是否存在，缺失则自动补充。  


### **核心优点与优势**  
1. **稳定性强，容错性高**  
   - 内置**上传重试机制**（默认3次重试），应对网络波动或 GitHub API 临时故障。  
   - 同步状态文件（`synced_data.json`）自动备份，即使文件损坏也能从备份恢复，避免同步记录丢失。  
   - 单个文件同步失败不影响整体流程，确保脚本持续运行直至完成所有可同步内容。  

2. **减少无效操作，效率更高**  
   - 仅同步新增或更新的内容，避免重复下载和上传。  
   - 优化 API 请求逻辑：通过缓存现有 Release 信息、减少冗余查询，降低 GitHub API 调用频率，规避请求限制。  
   - 对源代码文件简化判断逻辑，减少不必要的元数据请求，提升同步速度。  

3. **兼容性强，适配多种场景**  
   - 支持处理无标题、无描述的 Release（自动用标签名填充名称）。  
   - 兼容不同格式的标签名（含特殊字符如 `-`、`.` 等），自动处理文件命名冲突。  
   - 适配 GitHub API 限制（如文件大小检查、重复文件自动删除），避免常见报错（如 422 冲突错误）。  

4. **操作透明，易于调试**  
   - 详细的日志输出：记录每一步操作（下载进度、同步状态、错误信息等），便于定位问题。  
   - 同步状态文件（`synced_data.json`）清晰记录已同步内容，包括文件大小、更新时间等元数据，可直观查看同步历史。  


### **适用场景**  
- 镜像开源项目的 Release 到自有仓库，避免源仓库删除或访问受限导致资源丢失。  
- 二次开发场景：同步官方 Release 及源代码，便于基于最新版本进行定制开发。  
- 多仓库管理：需要在多个仓库间保持 Release 内容一致时，减少手动操作成本。  


### **总结**  
该脚本通过智能检测、高效同步和稳定容错设计，实现了 GitHub Release 内容的自动化镜像，既保证了数据的完整性和时效性，又最大限度减少了人工干预和无效操作，是开源项目镜像、多仓库协同管理的实用工具。
